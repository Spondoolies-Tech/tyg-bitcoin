#ifndef _____DC2DEFINES__45R_H____
#define _____DC2DEFINES__45R_H____

// compilation flags
#define HAS_PLL 1
#define TEST_BOARD 0
#define NO_TOP 0
#define NO_BOTTOM 0
#define NO_CUSTOM 0


// System parameters
#define ASIC_TEMPERATURE_TO_SET_FANS_HIGH   ASIC_TEMP_95
#define MAX_ASIC_TEMPERATURE ASIC_TEMP_119
#define COLD_ASIC_TEMPERATURE ASIC_TEMP_101
#define HOT_ASIC_TEMPERATURE ASIC_TEMP_113

#define ASIC_TO_SET_FANS_HIGH_COUNT   10
#define MAX_FAN_LEVEL   100
#define HOT_ASICS_IN_LOOP_FOR_DOWNSCALE 6
#define COLD_ASICS_IN_LOOP_FOR_UPSCALE  4

#define RUNTIME_TO_START_CHANGING_VOLTAGES 60 // after 5 minute?


#define TIME_FOR_DLL_USECS  1000
#define MIN_COSECUTIVE_JOBS_FOR_SCALING 400
#define MAX_CONSECUTIVE_JOBS_TO_COUNT (MIN_COSECUTIVE_JOBS_FOR_SCALING+400)
#define MIN_COSECUTIVE_JOBS_FOR_AC2DC_MEASUREMENT MIN_COSECUTIVE_JOBS_FOR_SCALING
#define MIN_COSECUTIVE_JOBS_FOR_DC2DC_MEASUREMENT MIN_COSECUTIVE_JOBS_FOR_SCALING

// In seconds
#define BIST_PERIOD_SECS_RAMPUP            1
#define BIST_PERIOD_SECS                   10
#define TRY_ASIC_FREQ_INCREASE_PERIOD_SECS 10
#define HOT_ASIC_FREQ_DECREASE_PERIOD_SECS 9




#define AC2DC_TEMP_GREEN_LINE 110
#define AC2DC_CURRENT_TRUSTWORTHY (900)
#define AC2DC_POWER_LIMIT  (1150)
#define AC2DC_UPSCALE_TIME_SECS   60  //2 2 minutes wait before upscaling AC2DC 
#define AC2DC_SPARE_CURRENT_TO_UPSCALE 5
#define AC2DC_LEFT_CURRENT_TO_DOWNSCALE 1

#define AC2DC_CURRENT_JUMP_16S        (16)
#define AC2DC_CURRENT_MINIMAL_FOR_DOWNSCALE_16S        (16)
#define AC2DC_SCALING_SAME_LOOP_PERIOD_SECS  5 



#define DC2DC_TEMP_GREEN_LINE         120
#define DC2DC_POWER_TRUSTWORTHY      (2*16)
#define DC2DC_CURRENT_TOP_BEFORE_LEARNING_16S (58 * 16) // TODO - for 6 ASICS
#define DC2DC_MINIMAL_TOP_16S (58 * 16) // never remember to current smaller then this 
#define DC2DC_INITIAL_CURRENT_16S (58 * 16) 
#define DC2DC_SAFE_TO_INCREASE_CURRENT_16S (1*16)
#define DC2DC_UPSCALE_TIME_SECS   10  
#define DC2DC_DOWNSCALE_TIME_SECS   20  

#define DC2DC_UPSCALE_TIME_AFTER_BOOT_SECS   60  
#define TOP_TEMPERATURE_FOR_VOLTAGE_SCALING_C 110


#define DC2DC_KEEP_FOR_LEAKAGE_16S    (1*16)
#define TIME_TO_RUN_AFTER_DC_PROBLEM  (3)

#define ASIC_VOLTAGE_DEFAULT ASIC_VOLTAGE_720

#define VTRIM_550   0xFFC4
#define VTRIM_810   0x10008

#define VTRIM_HIGH  0x0FFe3
#define VTRIM_START 0x0FFd1
#define VTRIM_LOW   0x0FFcF


#define MAX_ASIC_FREQ ASIC_FREQ_870
#define MINIMAL_ASIC_FREQ ASIC_FREQ_405
#define ASIC_FREQ_SAFE ASIC_FREQ_405

#define MURATA_AC2DC 1
#define IDLE_TIME_TO_PAUSE_ENGINES 5

#endif
